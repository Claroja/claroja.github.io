import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as s,c as a,e as t}from"./app-yeyEmHfz.js";const p="/assets/1-1xt9plL4.gif",o={},e=t(`<h1 id="animation" tabindex="-1"><a class="header-anchor" href="#animation" aria-hidden="true">#</a> animation</h1><p>matplotlib中有两个创建动画的类<code>FuncAnimation</code>和<code>ArtistAnimation</code>. <code>FuncAnimation</code>是比较容易理解和使用更广泛的, 所以我们也使用它.</p><p>我们将自定义一个<code>animate</code>方法, 作为<code>FuncAnimation</code>的参数, <code>FuncAnimation</code>将根据<code>animate</code>的内容逐帧创建动画.</p><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2><p><code>FuncAnimation(fig, func, frames=None, init_func=None, interval=200,**kwargs)</code></p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><code>fig</code></td><td><code>Figure</code>对象</td></tr><tr><td><code>func</code></td><td>图像更新方法, 参数是帧数</td></tr><tr><td><code>interval</code></td><td>两帧间隔的时间</td></tr><tr><td><code>frames</code></td><td>总帧数</td></tr><tr><td><code>init_func</code></td><td>在调用<code>func</code>方法之前调用的方法</td></tr></tbody></table><h2 id="动画的理解" tabindex="-1"><a class="header-anchor" href="#动画的理解" aria-hidden="true">#</a> 动画的理解</h2><ol><li><p>如果是点的移动, 直接更新坐标<code>(x,y)</code>即可</p></li><li><p>如果是线或者柱形图, 增长和减小, 则用新的图形替换旧的图形, 而不是只绘制增量部分. 是绘制存量+增量部分</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>line<span class="token punctuation">,</span> <span class="token operator">=</span> ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span>np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> num<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">animate</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
    line<span class="token punctuation">.</span>set_data<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> line<span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="直线增长类型" tabindex="-1"><a class="header-anchor" href="#直线增长类型" aria-hidden="true">#</a> 直线增长类型</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">import</span> FuncAnimation

<span class="token comment">## 设置画板</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span>np<span class="token punctuation">.</span>pi<span class="token operator">+</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">## 创建图形, 以及相关的数据</span>
<span class="token comment">### 1. 创建一个空直线, animate方法会来更新它</span>
line<span class="token punctuation">,</span> <span class="token operator">=</span> ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">### 2. 创建数据</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span>np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> num<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>x<span class="token punctuation">)</span>

<span class="token comment">### 3. 定义动画方法</span>
<span class="token comment">#### 参数i 代表了动画的当前帧, 范围是0到动画的最大帧数</span>
<span class="token comment">#### 注意返回值line后面有逗号, 因为FuncAnimation要求animate返回一个tuple对象</span>
<span class="token keyword">def</span> <span class="token function">animate</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
    line<span class="token punctuation">.</span>set_data<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> line<span class="token punctuation">,</span>

<span class="token comment">## 创建FuncAnimation</span>
<span class="token comment">### 1. frames是设置动画总共有多少帧, 默认是做[0,len(x))帧, 即0-49帧, 所以我们要额外加1帧</span>
<span class="token comment">### 2. interval两帧之间间隔多少毫秒</span>
<span class="token comment">### 3. blit只绘制之前没有绘制的部分</span>
anim <span class="token operator">=</span> FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> animate<span class="token punctuation">,</span> frames<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> interval<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> blit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment">## anim.save(&#39;sin.mp4&#39;)</span>
anim<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">&#39;sin.gif&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+p+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="文本案例" tabindex="-1"><a class="header-anchor" href="#文本案例" aria-hidden="true">#</a> 文本案例</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">import</span> FuncAnimation

<span class="token comment">## 设置画板</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">## 创建图形, 以及相关的数据</span>
<span class="token comment">### 1. 创建一个text, animate方法会来更新它</span>
<span class="token comment">### 2. 创建数据</span>
string_to_type <span class="token operator">=</span> <span class="token string">&#39;abcdefghijklmnopqrstuvwxyz0123&#39;</span>
label <span class="token operator">=</span> ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> string_to_type<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                ha<span class="token operator">=</span><span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
                fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>


<span class="token comment">### 3. 定义动画方法</span>
<span class="token comment">#### 参数i 代表了动画的当前帧, 范围是0到动画的最大帧数</span>
<span class="token comment">#### 注意返回值line后面有逗号, 因为FuncAnimation要求animate返回一个tuple对象</span>
<span class="token keyword">def</span> <span class="token function">animate</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
    label<span class="token punctuation">.</span>set_text<span class="token punctuation">(</span>string_to_type<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">&#39;Time (s): &#39;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">&#39;Frame &#39;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> label<span class="token punctuation">,</span>
<span class="token comment">## 创建FuncAnimation</span>
<span class="token comment">### 1. frames是设置动画总共有多少帧, 默认是做[0,len(x))帧, 所以我们要额外加1帧</span>
<span class="token comment">### 2. interval两帧之间间隔多少毫秒</span>
<span class="token comment">### 3. blit只绘制之前没有绘制的部分</span>
anim <span class="token operator">=</span> FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> animate<span class="token punctuation">,</span> frames<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>string_to_type<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> interval<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> blit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment">## anim.save(&#39;2.mp4&#39;)</span>
anim<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">&#39;2.gif&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用writer控制输出格式即帧率" tabindex="-1"><a class="header-anchor" href="#使用writer控制输出格式即帧率" aria-hidden="true">#</a> 使用Writer控制输出格式即帧率</h2><p><strong>时间与帧数换算</strong></p><ol><li>frames 总帧数, 这个由数据确定, 比如总共有多少个字符串, X会变化多少次</li><li>fps 帧率, 每秒播放所少帧</li><li>time = frames/fps</li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">import</span> FuncAnimation<span class="token punctuation">,</span> PillowWriter<span class="token punctuation">,</span> FFMpegWriter

<span class="token comment">## 设置画板</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>



<span class="token comment">## 创建图形, 以及相关的数据</span>
<span class="token comment">### 1. 创建一个text, animate方法会来更新它</span>
<span class="token comment">### 2. 创建数据</span>
string_to_type <span class="token operator">=</span> <span class="token string">&#39;abcdefghijklmnopqrstuvwxyz0123&#39;</span>
label <span class="token operator">=</span> ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> string_to_type<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                ha<span class="token operator">=</span><span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
                fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
fps <span class="token operator">=</span> <span class="token number">3</span>
<span class="token comment">### 3. 定义动画方法</span>
<span class="token comment">#### 参数i 代表了动画的当前帧, 范围是0到动画的最大帧数</span>
<span class="token comment">#### 注意返回值line后面有逗号, 因为FuncAnimation要求animate返回一个tuple对象</span>
<span class="token keyword">def</span> <span class="token function">animate</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
    label<span class="token punctuation">.</span>set_text<span class="token punctuation">(</span>string_to_type<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">&#39;Time (s): &#39;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">/</span>fps<span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">&#39;Frame &#39;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> label<span class="token punctuation">,</span>
<span class="token comment">## 创建FuncAnimation</span>
<span class="token comment">### 1. frames是设置动画总共有多少帧, 默认是做[0,len(x))帧, 所以我们要额外加1帧</span>
<span class="token comment">### 2. interval两帧之间间隔多少毫秒</span>
<span class="token comment">### 3. blit只绘制之前没有绘制的部分</span>
anim <span class="token operator">=</span> FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> animate<span class="token punctuation">,</span> frames<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>string_to_type<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> blit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
anim<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">&#39;text.mp4&#39;</span><span class="token punctuation">,</span> writer<span class="token operator">=</span>FFMpegWriter<span class="token punctuation">(</span>fps<span class="token operator">=</span>fps<span class="token punctuation">)</span><span class="token punctuation">)</span>
anim<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">&#39;text.gif&#39;</span><span class="token punctuation">,</span>writer<span class="token operator">=</span>PillowWriter<span class="token punctuation">(</span>fps<span class="token operator">=</span>fps<span class="token punctuation">)</span> <span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="动态柱状图" tabindex="-1"><a class="header-anchor" href="#动态柱状图" aria-hidden="true">#</a> 动态柱状图</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">import</span> FuncAnimation
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
 
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">20</span>
 
bars <span class="token operator">=</span> ax<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># x-axis from 0 to 20</span>
                         <span class="token comment"># y-axis from 0 to 10</span>
 
<span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">:</span>
    y<span class="token punctuation">[</span>frame<span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
    bars<span class="token punctuation">[</span>frame<span class="token punctuation">]</span><span class="token punctuation">.</span>set_height<span class="token punctuation">(</span>y<span class="token punctuation">[</span>frame<span class="token punctuation">]</span><span class="token punctuation">)</span>
 
anim <span class="token operator">=</span> FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> update<span class="token punctuation">,</span> frames<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> interval<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>增长柱状图案例</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">as</span> animation
<span class="token keyword">from</span> bokeh<span class="token punctuation">.</span>sampledata<span class="token punctuation">.</span>gapminder <span class="token keyword">import</span> population

<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

countries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;China&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;United States&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;India&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Germany&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;United Kingdom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Russia&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;France&quot;</span><span class="token punctuation">,</span>
             <span class="token string">&quot;Australia&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Brazil&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pakistan&quot;</span><span class="token punctuation">]</span>
countries <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>countries<span class="token punctuation">)</span>
population <span class="token operator">=</span> population<span class="token punctuation">[</span>population<span class="token punctuation">.</span>index<span class="token punctuation">.</span>isin<span class="token punctuation">(</span>countries<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">create_tick_label</span><span class="token punctuation">(</span>pop<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> pop <span class="token operator">&gt;=</span> <span class="token number">1e9</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{:.2f} Bn&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>pop<span class="token operator">/</span><span class="token number">1e9</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{:.2f} Mn&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>pop<span class="token operator">/</span><span class="token number">1e6</span><span class="token punctuation">)</span>

<span class="token comment">### Create Initial Chart</span>
xdata<span class="token punctuation">,</span> ydata <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> population<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;1964&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>set_figheight<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>set_figwidth<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">&quot;Population Over Time (1964-2013)&quot;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">&quot;bold&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pad<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

bars <span class="token operator">=</span> ax<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span>xdata<span class="token punctuation">)</span><span class="token punctuation">,</span> height<span class="token operator">=</span>ydata<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">0.85</span><span class="token punctuation">,</span> color<span class="token operator">=</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>tab10<span class="token punctuation">.</span>colors<span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1.5e9</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">&quot;Countries&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">&quot;Population&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1.6e9</span><span class="token punctuation">,</span><span class="token number">0.2e9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>create_tick_label<span class="token punctuation">(</span>pop<span class="token punctuation">)</span> <span class="token keyword">for</span> pop <span class="token keyword">in</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1.6e9</span><span class="token punctuation">,</span><span class="token number">0.2e9</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span><span class="token number">1.3e9</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">5.0</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;tomato&quot;</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">&quot;dashed&quot;</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;1.3 Billion&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span><span class="token number">1e9</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">5.0</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">&quot;dashed&quot;</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;1 Billion&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>hlines<span class="token punctuation">(</span><span class="token number">0.5e9</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">5.0</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">&quot;dashed&quot;</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;Half Billion&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">)</span>

year_label <span class="token operator">=</span> ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">750e6</span><span class="token punctuation">,</span> <span class="token string">&quot;Year: 1964&quot;</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;tomato&quot;</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">&quot;bold&quot;</span><span class="token punctuation">)</span>

country_labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> country<span class="token punctuation">,</span> i<span class="token punctuation">,</span> pop <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>countries<span class="token punctuation">,</span> xdata<span class="token punctuation">,</span> ydata<span class="token punctuation">)</span><span class="token punctuation">:</span>
    label <span class="token operator">=</span> ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span>i<span class="token punctuation">,</span> pop<span class="token punctuation">,</span> country<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">&quot;bottom&quot;</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">&quot;bold&quot;</span><span class="token punctuation">)</span>
    country_labels<span class="token punctuation">.</span>append<span class="token punctuation">(</span>label<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">&quot;best&quot;</span><span class="token punctuation">)</span>

<span class="token comment">### Data Generator</span>
<span class="token keyword">def</span> <span class="token function">data_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> year <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1965</span><span class="token punctuation">,</span><span class="token number">2014</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> year<span class="token punctuation">,</span> population<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">### Animation Function</span>
<span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    year<span class="token punctuation">,</span> bar_heights <span class="token operator">=</span> data
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> bar <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>bars<span class="token punctuation">.</span>patches<span class="token punctuation">)</span><span class="token punctuation">:</span>
        bar<span class="token punctuation">.</span>set_height<span class="token punctuation">(</span>bar_heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">## Update Line</span>

    year_label<span class="token punctuation">.</span>set_text<span class="token punctuation">(</span><span class="token string">&quot;Year: {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> i<span class="token punctuation">,</span> height <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>bar_heights<span class="token punctuation">)</span><span class="token punctuation">:</span>
        country_labels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>set_position<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> bars

anim <span class="token operator">=</span> animation<span class="token punctuation">.</span>FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> run<span class="token punctuation">,</span> data_gen<span class="token punctuation">,</span> interval<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> repeat<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="直线图案例" tabindex="-1"><a class="header-anchor" href="#直线图案例" aria-hidden="true">#</a> 直线图案例</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">as</span> animation

<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime<span class="token punctuation">,</span> date

apple_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">&quot;~/datasets/AAPL.csv&quot;</span><span class="token punctuation">)</span>

<span class="token comment">### Convert date from string to datetime.date object.</span>
xdata <span class="token operator">=</span> <span class="token punctuation">[</span>date<span class="token punctuation">.</span>fromisoformat<span class="token punctuation">(</span>dt<span class="token punctuation">)</span> <span class="token keyword">for</span> dt <span class="token keyword">in</span> apple_df<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Date&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
y1data <span class="token operator">=</span> apple_df<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Open&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y2data <span class="token operator">=</span> apple_df<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;High&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y3data <span class="token operator">=</span> apple_df<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Low&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
y4data <span class="token operator">=</span> apple_df<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Close&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">### Create Initial Chart</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>set_figheight<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>set_figwidth<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">&quot;Apple OHLC Prices&quot;</span><span class="token punctuation">)</span>

line1<span class="token punctuation">,</span> <span class="token operator">=</span> ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>xdata<span class="token punctuation">,</span> y1data<span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;Open&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;tomato&quot;</span><span class="token punctuation">)</span>
line2<span class="token punctuation">,</span> <span class="token operator">=</span> ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>xdata<span class="token punctuation">,</span> y2data<span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;High&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;dodgerblue&quot;</span><span class="token punctuation">)</span>
line3<span class="token punctuation">,</span> <span class="token operator">=</span> ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>xdata<span class="token punctuation">,</span> y3data<span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;Low&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;lime&quot;</span><span class="token punctuation">)</span>
line4<span class="token punctuation">,</span> <span class="token operator">=</span> ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>xdata<span class="token punctuation">,</span> y4data<span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;Close&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xlim<span class="token punctuation">(</span>date<span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> date<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">&quot;Date&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">&quot;Price ($)&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">&quot;best&quot;</span><span class="token punctuation">)</span>

<span class="token comment">### Data Generator</span>
<span class="token keyword">def</span> <span class="token function">data_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    dates <span class="token operator">=</span> apple_df<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Date&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
    os<span class="token punctuation">,</span> hs<span class="token punctuation">,</span> ls<span class="token punctuation">,</span> cs <span class="token operator">=</span> apple_df<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Open&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> apple_df<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;High&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> apple_df<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Low&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> apple_df<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Close&quot;</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> dt<span class="token punctuation">,</span> o<span class="token punctuation">,</span>h<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>dates<span class="token punctuation">,</span> os<span class="token punctuation">,</span> hs<span class="token punctuation">,</span> ls<span class="token punctuation">,</span> cs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> date<span class="token punctuation">.</span>fromisoformat<span class="token punctuation">(</span>dt<span class="token punctuation">)</span><span class="token punctuation">,</span> o<span class="token punctuation">,</span>h<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c <span class="token comment">## Convert date from string to datetime.date object.</span>

<span class="token comment">### Animation Function</span>
<span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># update the data</span>
    date<span class="token punctuation">,</span> o<span class="token punctuation">,</span>h<span class="token punctuation">,</span>l<span class="token punctuation">,</span>c <span class="token operator">=</span> data
    xdata<span class="token punctuation">.</span>append<span class="token punctuation">(</span>date<span class="token punctuation">)</span>
    y1data<span class="token punctuation">.</span>append<span class="token punctuation">(</span>o<span class="token punctuation">)</span>
    y2data<span class="token punctuation">.</span>append<span class="token punctuation">(</span>h<span class="token punctuation">)</span>
    y3data<span class="token punctuation">.</span>append<span class="token punctuation">(</span>l<span class="token punctuation">)</span>
    y4data<span class="token punctuation">.</span>append<span class="token punctuation">(</span>c<span class="token punctuation">)</span>

    line1<span class="token punctuation">.</span>set_data<span class="token punctuation">(</span>xdata<span class="token punctuation">,</span> y1data<span class="token punctuation">)</span> <span class="token comment">## Update Line</span>
    line2<span class="token punctuation">.</span>set_data<span class="token punctuation">(</span>xdata<span class="token punctuation">,</span> y2data<span class="token punctuation">)</span> <span class="token comment">## Update Line</span>
    line3<span class="token punctuation">.</span>set_data<span class="token punctuation">(</span>xdata<span class="token punctuation">,</span> y3data<span class="token punctuation">)</span> <span class="token comment">## Update Line</span>
    line4<span class="token punctuation">.</span>set_data<span class="token punctuation">(</span>xdata<span class="token punctuation">,</span> y4data<span class="token punctuation">)</span> <span class="token comment">## Update Line</span>

    <span class="token keyword">return</span> line1<span class="token punctuation">,</span> line2<span class="token punctuation">,</span> line3<span class="token punctuation">,</span> line4

anim <span class="token operator">=</span> animation<span class="token punctuation">.</span>FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> run<span class="token punctuation">,</span> data_gen<span class="token punctuation">,</span> interval<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span> repeat<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="泡泡图案例" tabindex="-1"><a class="header-anchor" href="#泡泡图案例" aria-hidden="true">#</a> 泡泡图案例</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">as</span> animation
<span class="token keyword">from</span> bokeh<span class="token punctuation">.</span>sampledata<span class="token punctuation">.</span>gapminder <span class="token keyword">import</span> population

<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

countries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;China&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;United States&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;India&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Germany&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;United Kingdom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Russia&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;France&quot;</span><span class="token punctuation">,</span>
             <span class="token string">&quot;Australia&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Brazil&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pakistan&quot;</span><span class="token punctuation">]</span>
countries <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>countries<span class="token punctuation">)</span>
population <span class="token operator">=</span> population<span class="token punctuation">[</span>population<span class="token punctuation">.</span>index<span class="token punctuation">.</span>isin<span class="token punctuation">(</span>countries<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">create_tick_label</span><span class="token punctuation">(</span>pop<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> pop <span class="token operator">&gt;=</span> <span class="token number">1e9</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{:.2f} Bn&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>pop<span class="token operator">/</span><span class="token number">1e9</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{:.2f} Mn&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>pop<span class="token operator">/</span><span class="token number">1e6</span><span class="token punctuation">)</span>

<span class="token comment">### Create Initial Chart</span>
xdata<span class="token punctuation">,</span> ydata <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1964</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">,</span> population<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;1964&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span>

fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>set_figheight<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>set_figwidth<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">&quot;Population Over Time (1964-2013)&quot;</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">&quot;bold&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pad<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

points <span class="token operator">=</span> ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x<span class="token operator">=</span>ydata<span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token operator">=</span>ydata<span class="token operator">/</span><span class="token number">1e5</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span> color<span class="token operator">=</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>tab10<span class="token punctuation">.</span>colors<span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">&quot;Population&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">&quot;Countries&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_xlim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1.5e9</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> countries<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1.6e9</span><span class="token punctuation">,</span><span class="token number">0.2e9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>create_tick_label<span class="token punctuation">(</span>pop<span class="token punctuation">)</span> <span class="token keyword">for</span> pop <span class="token keyword">in</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1.6e9</span><span class="token punctuation">,</span><span class="token number">0.2e9</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span><span class="token number">1.3e9</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">5.0</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;tomato&quot;</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">&quot;dashed&quot;</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;1.3 Billion&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span><span class="token number">1e9</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">5.0</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">&quot;dashed&quot;</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;1 Billion&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>vlines<span class="token punctuation">(</span><span class="token number">0.5e9</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">5.0</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">&quot;dashed&quot;</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&quot;Half Billion&quot;</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token string">&quot;both&quot;</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">&quot;best&quot;</span><span class="token punctuation">)</span>

year_label <span class="token operator">=</span> ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">1.05e9</span><span class="token punctuation">,</span> <span class="token number">9.2</span><span class="token punctuation">,</span> <span class="token string">&quot;Year: 1964&quot;</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;tomato&quot;</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">&quot;bold&quot;</span><span class="token punctuation">)</span>

<span class="token comment">### Data Generator</span>
<span class="token keyword">def</span> <span class="token function">data_gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> year <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1965</span><span class="token punctuation">,</span><span class="token number">2014</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> year<span class="token punctuation">,</span> population<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">### Animation Function</span>
<span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    year<span class="token punctuation">,</span> point_sizes <span class="token operator">=</span> data
    points<span class="token punctuation">.</span>set_sizes<span class="token punctuation">(</span>point_sizes<span class="token operator">/</span><span class="token number">1e5</span><span class="token punctuation">)</span>
    points<span class="token punctuation">.</span>set_offsets<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>point_sizes<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    year_label<span class="token punctuation">.</span>set_text<span class="token punctuation">(</span><span class="token string">&quot;Year: {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> points

anim <span class="token operator">=</span> animation<span class="token punctuation">.</span>FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> run<span class="token punctuation">,</span> data_gen<span class="token punctuation">,</span> interval<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> repeat<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="点沿着方程曲线移动" tabindex="-1"><a class="header-anchor" href="#点沿着方程曲线移动" aria-hidden="true">#</a> 点沿着方程曲线移动</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>animation <span class="token keyword">import</span> FuncAnimation
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlim<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>ylim<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token number">10</span><span class="token operator">/</span>x
y <span class="token operator">=</span> func<span class="token punctuation">(</span>x<span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
sca <span class="token operator">=</span> ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>func<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


frames <span class="token operator">=</span> <span class="token number">10</span>

<span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> <span class="token number">6</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span>frames <span class="token operator">*</span> i
    y <span class="token operator">=</span> func<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    sca<span class="token punctuation">.</span>set_offsets<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 不要被方法名迷惑, 就是在设置点的位置</span>

anim <span class="token operator">=</span> FuncAnimation<span class="token punctuation">(</span>fig<span class="token punctuation">,</span> update<span class="token punctuation">,</span> frames<span class="token operator">=</span>frames<span class="token punctuation">,</span> interval<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>

fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>参考: https://blog.finxter.com/matplotlib-animation/ https://brushingupscience.com/2016/06/21/matplotlib-animations-the-easy-way/ https://brushingupscience.com/2019/08/01/elaborate-matplotlib-animations/ https://holypython.com/how-to-create-matplotlib-animations-the-ultimate-guide/ https://holypython.com/how-to-save-matplotlib-animations-the-ultimate-guide/ https://coderslegacy.com/python/matplotlib-funcanimation/ https://coderzcolumn.com/tutorials/data-science/matplotlib-animations</p>`,28),c=[e];function l(u,i){return s(),a("div",null,c)}const d=n(o,[["render",l],["__file","animation.html.vue"]]);export{d as default};
