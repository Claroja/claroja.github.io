import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as e,c as o,b as n,d as s,e as c,a as i}from"./app-9tftCahk.js";const u={},l=n("h1",{id:"catboost-catboostencoder",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#catboost-catboostencoder","aria-hidden":"true"},"#"),s(" CatBoost(CatBoostEncoder)")],-1),r=n("h2",{id:"pandas",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#pandas","aria-hidden":"true"},"#"),s(" pandas")],-1),k={id:"category-encoders",tabindex:"-1"},d=n("a",{class:"header-anchor",href:"#category-encoders","aria-hidden":"true"},"#",-1),m={href:"https://contrib.scikit-learn.org/category_encoders/index.html",target:"_blank",rel:"noopener noreferrer"},_=i(`<p>这与留一法编码非常相似，但会“即时”计算值。 因此，这些值在训练阶段自然会发生变化，并且没有必要添加随机噪声。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> category_encoders <span class="token keyword">as</span> ce
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
data <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">&#39;Education&#39;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">&#39;PhD&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;HighSchool&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Bachelor&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Master&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;HighSchool&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Master&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;PhD&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Bachelor&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&#39;Income&#39;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">28300</span><span class="token punctuation">,</span> <span class="token number">4500</span><span class="token punctuation">,</span> <span class="token number">7500</span><span class="token punctuation">,</span> <span class="token number">12500</span><span class="token punctuation">,</span> <span class="token number">4200</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">,</span> <span class="token number">25000</span><span class="token punctuation">,</span> <span class="token number">7200</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

Income_grand_mean <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">&#39;Income&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
data<span class="token punctuation">[</span><span class="token string">&#39;Income_grand_mean&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>Income_grand_mean<span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
Income_group <span class="token operator">=</span> data<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">&#39;Education&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&#39;Income&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rename<span class="token punctuation">(</span><span class="token string">&#39;Income_level_mean&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
data_new <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>data<span class="token punctuation">,</span> Income_group<span class="token punctuation">)</span>
features <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>data_new<span class="token punctuation">.</span>columns<span class="token punctuation">)</span>
features<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token string">&#39;Income&#39;</span><span class="token punctuation">)</span>

ce_17 <span class="token operator">=</span> ce<span class="token punctuation">.</span>CatBoostEncoder<span class="token punctuation">(</span>cols<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;Education&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data_new<span class="token punctuation">,</span> data_new<span class="token punctuation">[</span><span class="token string">&#39;Income&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2><ol><li>https://datascience.stackexchange.com/questions/39317/difference-between-ordinalencoder-and-labelencoder</li><li>https://www.cnblogs.com/dangui/p/15836197.html</li></ol>`,4);function h(b,g){const a=p("ExternalLinkIcon");return e(),o("div",null,[l,r,n("h2",k,[d,s(),n("a",m,[s("category_encoders"),c(a)])]),_])}const x=t(u,[["render",h],["__file","3_1_9特征编码_CatBoost.html.vue"]]);export{x as default};
