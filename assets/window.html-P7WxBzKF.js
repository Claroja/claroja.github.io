import{_ as s}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as n,c as a,e as p}from"./app-MTzDpLgJ.js";const e="/assets/1-nZRlVl5m.svg",o="/assets/2-DPfHuSVA.svg",t="/assets/3-naMxpfI0.png",r={},l=p('<h1 id="window" tabindex="-1"><a class="header-anchor" href="#window" aria-hidden="true">#</a> window</h1><p>Windows split the infinit stream into “buckets” of finite size, over which we can apply computations.</p><h3 id="tumble" tabindex="-1"><a class="header-anchor" href="#tumble" aria-hidden="true">#</a> TUMBLE</h3><p>Tumbling windows have a fixed size and do not overlap.</p><figure><img src="'+e+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>In <code>streaming mode</code>, the time attribute field must be either <code>event</code> or <code>processing</code> time attributes. In <code>batch mode</code>, the time attribute field of window table function must be an attribute of type <code>TIMESTAMP</code> or <code>TIMESTAMP_LTZ</code>.</p><h4 id="funciton" tabindex="-1"><a class="header-anchor" href="#funciton" aria-hidden="true">#</a> funciton</h4><p><code>TUMBLE(TABLE data, DESCRIPTOR(timecol), size [, offset ])</code></p><ul><li><strong>data</strong>: is a table parameter that can be any relation with a time attribute column.</li><li><strong>timecol</strong>: is a column descriptor indicating which time attributes column of data should be mapped to - tumbling windows.</li><li><strong>size</strong>: is a duration specifying the width of the tumbling windows.</li><li><strong>offset</strong>: is an optional parameter to specify the offset which window start would be shifted by.</li></ul><h4 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> example</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>Flink <span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Bid<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+</span>
<span class="token operator">|</span>          bidtime <span class="token operator">|</span> price <span class="token operator">|</span> item <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span>  <span class="token number">4.00</span> <span class="token operator">|</span> C    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span> <span class="token operator">|</span>  <span class="token number">2.00</span> <span class="token operator">|</span> A    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span> <span class="token operator">|</span>  <span class="token number">5.00</span> <span class="token operator">|</span> D    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">6.00</span> <span class="token operator">|</span> F    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+</span>

Flink <span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">TABLE</span><span class="token punctuation">(</span>
   TUMBLE<span class="token punctuation">(</span>
     <span class="token keyword">DATA</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">TABLE</span> Bid<span class="token punctuation">,</span>
     TIMECOL <span class="token operator">=</span><span class="token operator">&gt;</span> DESCRIPTOR<span class="token punctuation">(</span>bidtime<span class="token punctuation">)</span><span class="token punctuation">,</span>
     SIZE <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">INTERVAL</span> <span class="token string">&#39;10&#39;</span> MINUTES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
<span class="token operator">|</span>          bidtime <span class="token operator">|</span> price <span class="token operator">|</span> item <span class="token operator">|</span>     window_start <span class="token operator">|</span>       window_end <span class="token operator">|</span>            window_time  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span>  <span class="token number">4.00</span> <span class="token operator">|</span> C    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span> <span class="token operator">|</span>  <span class="token number">2.00</span> <span class="token operator">|</span> A    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span> <span class="token operator">|</span>  <span class="token number">5.00</span> <span class="token operator">|</span> D    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">6.00</span> <span class="token operator">|</span> F    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="hop" tabindex="-1"><a class="header-anchor" href="#hop" aria-hidden="true">#</a> HOP</h3><p>The HOP function assigns elements to windows of fixed length. Like a TUMBLE windowing function, the size of the windows is configured by the window size parameter. An additional window slide parameter controls how frequently a hopping window is started. Hence, hopping windows can be overlapping if the slide is smaller than the window size. <img src="`+o+`" alt="" loading="lazy"></p><p>In <code>streaming mode</code>, the time attribute field must be either <code>event</code> or <code>processing</code> time attributes. In <code>batch mode</code>, the time attribute field of window table function must be an attribute of type <code>TIMESTAMP</code> or <code>TIMESTAMP_LTZ</code>.</p><h4 id="function" tabindex="-1"><a class="header-anchor" href="#function" aria-hidden="true">#</a> function</h4><p><code>HOP(TABLE data, DESCRIPTOR(timecol), slide, size [, offset ])</code></p><ul><li>data: is a table parameter that can be any relation with an time attribute column.</li><li>timecol: is a column descriptor indicating which time attributes column of data should be mapped to - hopping windows.</li><li>slide: is a duration specifying the duration between the start of sequential hopping windows</li><li>size: is a duration specifying the width of the hopping windows.</li><li>offset: is an optional parameter to specify the offset which window start would be shifted by.</li></ul><h4 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1" aria-hidden="true">#</a> example</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">TABLE</span><span class="token punctuation">(</span>
    HOP<span class="token punctuation">(</span>
      <span class="token keyword">DATA</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">TABLE</span> Bid<span class="token punctuation">,</span>
      TIMECOL <span class="token operator">=</span><span class="token operator">&gt;</span> DESCRIPTOR<span class="token punctuation">(</span>bidtime<span class="token punctuation">)</span><span class="token punctuation">,</span>
      SLIDE <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">INTERVAL</span> <span class="token string">&#39;5&#39;</span> MINUTES<span class="token punctuation">,</span>
      SIZE <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">INTERVAL</span> <span class="token string">&#39;10&#39;</span> MINUTES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
<span class="token operator">|</span>          bidtime <span class="token operator">|</span> price <span class="token operator">|</span> item <span class="token operator">|</span>     window_start <span class="token operator">|</span>       window_end <span class="token operator">|</span>           window_time   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span>  <span class="token number">4.00</span> <span class="token operator">|</span> C    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span>  <span class="token number">4.00</span> <span class="token operator">|</span> C    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">15</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">14</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span> <span class="token operator">|</span>  <span class="token number">2.00</span> <span class="token operator">|</span> A    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span> <span class="token operator">|</span>  <span class="token number">2.00</span> <span class="token operator">|</span> A    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">15</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">14</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span> <span class="token operator">|</span>  <span class="token number">5.00</span> <span class="token operator">|</span> D    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span> <span class="token operator">|</span>  <span class="token number">5.00</span> <span class="token operator">|</span> D    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">15</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">14</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">15</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">14</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">15</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">14</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">6.00</span> <span class="token operator">|</span> F    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">6.00</span> <span class="token operator">|</span> F    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">15</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">25</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">24</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cumulate" tabindex="-1"><a class="header-anchor" href="#cumulate" aria-hidden="true">#</a> CUMULATE</h3><p>The <code>CUMULATE</code> function assigns elements to windows that cover rows within an initial interval of step size and expand to one more step size (keep window start fixed) every step until the max window size.You can think CUMULATE function as applying TUMBLE windowing with max window size first, and split each tumbling windows into several windows with same window start and window ends of step-size difference.</p><figure><img src="`+t+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>In <code>streaming mode</code>, the time attribute field must be either <code>event</code> or <code>processing</code> time attributes. In <code>batch mode</code>, the time attribute field of window table function must be an attribute of type <code>TIMESTAMP</code> or <code>TIMESTAMP_LTZ</code>.</p><h4 id="function-1" tabindex="-1"><a class="header-anchor" href="#function-1" aria-hidden="true">#</a> function</h4><p><code>CUMULATE(TABLE data, DESCRIPTOR(timecol), step, size)</code></p><ul><li>data: is a table parameter that can be any relation with an time attribute column.</li><li>timecol: is a column descriptor indicating which time attributes column of data should be mapped to cumulating windows.</li><li>step: is a duration specifying the increased window size between the end of sequential cumulating windows.</li><li>size: is a duration specifying the max width of the cumulating windows. size must be an integral multiple of step.</li><li>offset: is an optional parameter to specify the offset which window start would be shifted by.</li></ul><h4 id="example-2" tabindex="-1"><a class="header-anchor" href="#example-2" aria-hidden="true">#</a> example</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">TABLE</span><span class="token punctuation">(</span>
    CUMULATE<span class="token punctuation">(</span>
      <span class="token keyword">DATA</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">TABLE</span> Bid<span class="token punctuation">,</span>
      TIMECOL <span class="token operator">=</span><span class="token operator">&gt;</span> DESCRIPTOR<span class="token punctuation">(</span>bidtime<span class="token punctuation">)</span><span class="token punctuation">,</span>
      STEP <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">INTERVAL</span> <span class="token string">&#39;2&#39;</span> MINUTES<span class="token punctuation">,</span>
      SIZE <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">INTERVAL</span> <span class="token string">&#39;10&#39;</span> MINUTES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
<span class="token operator">|</span>          bidtime <span class="token operator">|</span> price <span class="token operator">|</span> item <span class="token operator">|</span>     window_start <span class="token operator">|</span>       window_end <span class="token operator">|</span>            window_time  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span>  <span class="token number">4.00</span> <span class="token operator">|</span> C    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">06</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span>  <span class="token number">4.00</span> <span class="token operator">|</span> C    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">08</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span>  <span class="token number">4.00</span> <span class="token operator">|</span> C    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span> <span class="token operator">|</span>  <span class="token number">2.00</span> <span class="token operator">|</span> A    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">08</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span> <span class="token operator">|</span>  <span class="token number">2.00</span> <span class="token operator">|</span> A    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span> <span class="token operator">|</span>  <span class="token number">5.00</span> <span class="token operator">|</span> D    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">12</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">14</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">16</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">15</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">18</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">14</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">16</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">15</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">18</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">6.00</span> <span class="token operator">|</span> F    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">18</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">6.00</span> <span class="token operator">|</span> F    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">19</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-offset" tabindex="-1"><a class="header-anchor" href="#window-offset" aria-hidden="true">#</a> Window Offset</h2><p>For example, which window would be assigned to for a record with timestamp 2021-06-30 00:00:04 for a Tumble window with 10 MINUTE as size?</p><p>If offset is 0, the record assigns to window [2021-06-30 00:00:00, 2021-06-30 00:10:00). If offset is 4 MINUTE, the record assigns to window [2021-06-29 23:54:00, 2021-06-30 00:04:00). If offset is -4 MINUTE, the record assigns to window [2021-06-29 23:56:00, 2021-06-30 00:06:00).</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>Flink <span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">TABLE</span><span class="token punctuation">(</span>
   TUMBLE<span class="token punctuation">(</span>
     <span class="token keyword">DATA</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">TABLE</span> Bid<span class="token punctuation">,</span>
     TIMECOL <span class="token operator">=</span><span class="token operator">&gt;</span> DESCRIPTOR<span class="token punctuation">(</span>bidtime<span class="token punctuation">)</span><span class="token punctuation">,</span>
     SIZE <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">INTERVAL</span> <span class="token string">&#39;10&#39;</span> MINUTES<span class="token punctuation">,</span>
     <span class="token keyword">OFFSET</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">INTERVAL</span> <span class="token string">&#39;1&#39;</span> MINUTES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
<span class="token operator">|</span>          bidtime <span class="token operator">|</span> price <span class="token operator">|</span> item <span class="token operator">|</span>     window_start <span class="token operator">|</span>       window_end <span class="token operator">|</span>            window_time  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span>  <span class="token number">4.00</span> <span class="token operator">|</span> C    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span> <span class="token operator">|</span>  <span class="token number">2.00</span> <span class="token operator">|</span> A    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span> <span class="token operator">|</span>  <span class="token number">5.00</span> <span class="token operator">|</span> D    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span>  <span class="token number">3.00</span> <span class="token operator">|</span> B    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">21</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">1.00</span> <span class="token operator">|</span> E    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">21</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">6.00</span> <span class="token operator">|</span> F    <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">21</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span>:<span class="token number">59.999</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+------------------+------------------+-------------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-aggregation" tabindex="-1"><a class="header-anchor" href="#window-aggregation" aria-hidden="true">#</a> Window Aggregation</h2><p>Window aggregations are defined in the GROUP BY clause contains “window_start” and “window_end” columns of the relation applied Windowing TVF. Just like queries with regular GROUP BY clauses, queries with a group by window aggregation will compute a single result row per group.</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>Flink <span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Bid<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+-------------+</span>
<span class="token operator">|</span>          bidtime <span class="token operator">|</span> price <span class="token operator">|</span> item <span class="token operator">|</span> supplier_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+-------------+</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">05</span> <span class="token operator">|</span> <span class="token number">4.00</span>  <span class="token operator">|</span> C    <span class="token operator">|</span> supplier1   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">07</span> <span class="token operator">|</span> <span class="token number">2.00</span>  <span class="token operator">|</span> A    <span class="token operator">|</span> supplier1   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">09</span> <span class="token operator">|</span> <span class="token number">5.00</span>  <span class="token operator">|</span> D    <span class="token operator">|</span> supplier2   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">11</span> <span class="token operator">|</span> <span class="token number">3.00</span>  <span class="token operator">|</span> B    <span class="token operator">|</span> supplier2   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">13</span> <span class="token operator">|</span> <span class="token number">1.00</span>  <span class="token operator">|</span> E    <span class="token operator">|</span> supplier1   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">17</span> <span class="token operator">|</span> <span class="token number">6.00</span>  <span class="token operator">|</span> F    <span class="token operator">|</span> supplier2   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+-------+------+-------------+</span>

<span class="token comment">-- tumbling window aggregation</span>
Flink <span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> window_start<span class="token punctuation">,</span> window_end<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span>
  <span class="token keyword">FROM</span> <span class="token keyword">TABLE</span><span class="token punctuation">(</span>
    TUMBLE<span class="token punctuation">(</span><span class="token keyword">TABLE</span> Bid<span class="token punctuation">,</span> DESCRIPTOR<span class="token punctuation">(</span>bidtime<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token string">&#39;10&#39;</span> MINUTES<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> window_start<span class="token punctuation">,</span> window_end<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+------------------+-------+</span>
<span class="token operator">|</span>     window_start <span class="token operator">|</span>       window_end <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+------------------+-------+</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">11.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">08</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">10.00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+------------------+-------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>refs: https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/table/sql/queries/window-tvf/ https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/table/sql/queries/window-agg/</p>`,36),c=[l];function k(u,m){return n(),a("div",null,c)}const d=s(r,[["render",k],["__file","window.html.vue"]]);export{d as default};
