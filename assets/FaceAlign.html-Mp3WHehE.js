const n=JSON.parse(`{"key":"v-729c9286","path":"/2%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/2%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/1%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB/FaceAlign.html","title":"nll","lang":"zh-CN","frontmatter":{"description":"nll 1. 实现 import numpy as np import dlib import cv2 as cv ## 1. 制作标准脸 TEMPLATE = np.float32( [[0. , 0.17856914], [0.00412831, 0.31259227], [0.0196793 , 0.44770938], [0.04809872, 0.5800727 ], [0.10028344, 0.70349526], [0.17999782, 0.81208664], [0.27627307, 0.90467805], [0.38463727, 0.98006284], [0.5073561 , 1. ], [0.63014114, 0.9761118 ], [0.7386777 , 0.89921385], [0.8354747 , 0.80513287], [0.91434467, 0.6945623 ], [0.9643504 , 0.56826204], [0.9887058 , 0.432444 ], [0.9993123 , 0.29529294], [1. , 0.15909716], [0.09485531, 0.07603313], [0.15534875, 0.02492465], [0.2377474 , 0.01139098], [0.32313403, 0.02415778], [0.4036699 , 0.05780071], [0.56864655, 0.0521157 ], [0.65128165, 0.01543965], [0.7379608 , 0. ], [0.82290924, 0.01191543], [0.88739765, 0.06025707], [0.48893312, 0.15513189], [0.48991537, 0.24343018], [0.49092147, 0.33176517], [0.49209353, 0.422107 ], [0.397399 , 0.48004663], [0.4442625 , 0.49906778], [0.4949509 , 0.5144414 ], [0.54558265, 0.49682876], [0.59175086, 0.47722608], [0.194157 , 0.16926692], [0.24600308, 0.13693026], [0.31000495, 0.13735634], [0.36378494, 0.17794687], [0.3063696 , 0.19082251], [0.24390514, 0.19138186], [0.6189632 , 0.17277813], [0.67249435, 0.12988105], [0.7362857 , 0.1279085 ], [0.7888591 , 0.15817115], [0.74115133, 0.18155812], [0.6791372 , 0.18370388], [0.30711025, 0.6418497 ], [0.3759703 , 0.6109595 ], [0.44670257, 0.5970508 ], [0.49721557, 0.60872644], [0.5500201 , 0.5954327 ], [0.6233016 , 0.6070911 ], [0.69541407, 0.6341429 ], [0.628068 , 0.70906836], [0.5573954 , 0.7434471 ], [0.50020397, 0.7505844 ], [0.44528747, 0.74580276], [0.37508208, 0.7145425 ], [0.3372878 , 0.64616466], [0.44701463, 0.64064664], [0.49795204, 0.6449633 ], [0.5513943 , 0.6385937 ], [0.6650228 , 0.63955915], [0.5530556 , 0.67647934], [0.4986481 , 0.68417645], [0.44657204, 0.6786047 ]]) ## 2. 放射变换时用到的点(仿射变换需要用到3个点) INNER_EYES_AND_BOTTOM_LIP = [39, 42, 57] OUTER_EYES_AND_NOSE = [36, 45, 33] AffinePoint = OUTER_EYES_AND_NOSE ## 3. 制作并展示标准脸(放射变换三个点黑色, 其他红色) image_template = np.zeros((500,500,3), np.uint8) image_template[:] = [255, 255, 255] for i, point in enumerate(TEMPLATE): if i in AffinePoint: cv.circle(image_template, (int(point[0] * 500), int(point[1] * 500)), 4, (0, 0, 0), -1) else: cv.circle(image_template, (int(point[0]*500),int(point[1]*500)), 2, (0, 0, 255), -1) cv.imshow('image_template', image_template) ## 4.1 读取图片, 并展示 image = cv.imread('waitou.png') image2 = image.copy() cv.imshow('image', image) ## 4.2 定位人脸 face_detector = dlib.get_frontal_face_detector() face_locations = face_detector(image, 1) ## 4.3 获取定人人脸标志 predictor = dlib.shape_predictor(\\"shape_predictor_68_face_landmarks.dat\\") landmark = predictor(image, face_locations[0]) points = [(p.x, p.y) for p in landmark.parts()] for i, point in enumerate(points): if i in AffinePoint: cv.circle(image, (int(point[0]), int(point[1])), 4, (0, 0, 0), -1) else: cv.circle(image, (int(point[0]),int(point[1])), 2, (0, 0, 255), -1) cv.imshow('image_landmark', image) ## 5. 制作并展示当前图片的脸 image_template2 = np.zeros((500,500,3), np.uint8) image_template2[:] = [255, 255, 255] for i, point in enumerate(points): if i in AffinePoint: cv.circle(image_template2, (int(point[0]), int(point[1])), 4, (0, 0, 0), -1) else: cv.circle(image_template2, (int(point[0]),int(point[1])), 2, (0, 0, 255), -1) cv.imshow('image_template2', image_template2) ## 6. 展示放射变换之后的脸 npLandmarks = np.float32(points) npLandmarkIndices = np.array(AffinePoint) imgDim = 500 H = cv.getAffineTransform(npLandmarks[npLandmarkIndices], imgDim * TEMPLATE[npLandmarkIndices]) thumbnail = cv.warpAffine(image2, H, (imgDim, imgDim)) cv.imshow('thumbnail_source', thumbnail) ## 7. 展示放射变换之后带标志的脸 for i, point in enumerate(TEMPLATE): if i in AffinePoint: cv.circle(thumbnail, (int(point[0] * 500), int(point[1] * 500)), 4, (0, 0, 0), -1) else: cv.circle(thumbnail, (int(point[0]*500),int(point[1]*500)), 2, (0, 0, 255), -1) cv.imshow('thumbnail', thumbnail) cv.waitKey(0) cv.destroyAllWindows()","head":[["meta",{"property":"og:url","content":"https://claroja.github.io/2%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/2%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/1%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB/FaceAlign.html"}],["meta",{"property":"og:site_name","content":"Claroja"}],["meta",{"property":"og:title","content":"nll"}],["meta",{"property":"og:description","content":"nll 1. 实现 import numpy as np import dlib import cv2 as cv ## 1. 制作标准脸 TEMPLATE = np.float32( [[0. , 0.17856914], [0.00412831, 0.31259227], [0.0196793 , 0.44770938], [0.04809872, 0.5800727 ], [0.10028344, 0.70349526], [0.17999782, 0.81208664], [0.27627307, 0.90467805], [0.38463727, 0.98006284], [0.5073561 , 1. ], [0.63014114, 0.9761118 ], [0.7386777 , 0.89921385], [0.8354747 , 0.80513287], [0.91434467, 0.6945623 ], [0.9643504 , 0.56826204], [0.9887058 , 0.432444 ], [0.9993123 , 0.29529294], [1. , 0.15909716], [0.09485531, 0.07603313], [0.15534875, 0.02492465], [0.2377474 , 0.01139098], [0.32313403, 0.02415778], [0.4036699 , 0.05780071], [0.56864655, 0.0521157 ], [0.65128165, 0.01543965], [0.7379608 , 0. ], [0.82290924, 0.01191543], [0.88739765, 0.06025707], [0.48893312, 0.15513189], [0.48991537, 0.24343018], [0.49092147, 0.33176517], [0.49209353, 0.422107 ], [0.397399 , 0.48004663], [0.4442625 , 0.49906778], [0.4949509 , 0.5144414 ], [0.54558265, 0.49682876], [0.59175086, 0.47722608], [0.194157 , 0.16926692], [0.24600308, 0.13693026], [0.31000495, 0.13735634], [0.36378494, 0.17794687], [0.3063696 , 0.19082251], [0.24390514, 0.19138186], [0.6189632 , 0.17277813], [0.67249435, 0.12988105], [0.7362857 , 0.1279085 ], [0.7888591 , 0.15817115], [0.74115133, 0.18155812], [0.6791372 , 0.18370388], [0.30711025, 0.6418497 ], [0.3759703 , 0.6109595 ], [0.44670257, 0.5970508 ], [0.49721557, 0.60872644], [0.5500201 , 0.5954327 ], [0.6233016 , 0.6070911 ], [0.69541407, 0.6341429 ], [0.628068 , 0.70906836], [0.5573954 , 0.7434471 ], [0.50020397, 0.7505844 ], [0.44528747, 0.74580276], [0.37508208, 0.7145425 ], [0.3372878 , 0.64616466], [0.44701463, 0.64064664], [0.49795204, 0.6449633 ], [0.5513943 , 0.6385937 ], [0.6650228 , 0.63955915], [0.5530556 , 0.67647934], [0.4986481 , 0.68417645], [0.44657204, 0.6786047 ]]) ## 2. 放射变换时用到的点(仿射变换需要用到3个点) INNER_EYES_AND_BOTTOM_LIP = [39, 42, 57] OUTER_EYES_AND_NOSE = [36, 45, 33] AffinePoint = OUTER_EYES_AND_NOSE ## 3. 制作并展示标准脸(放射变换三个点黑色, 其他红色) image_template = np.zeros((500,500,3), np.uint8) image_template[:] = [255, 255, 255] for i, point in enumerate(TEMPLATE): if i in AffinePoint: cv.circle(image_template, (int(point[0] * 500), int(point[1] * 500)), 4, (0, 0, 0), -1) else: cv.circle(image_template, (int(point[0]*500),int(point[1]*500)), 2, (0, 0, 255), -1) cv.imshow('image_template', image_template) ## 4.1 读取图片, 并展示 image = cv.imread('waitou.png') image2 = image.copy() cv.imshow('image', image) ## 4.2 定位人脸 face_detector = dlib.get_frontal_face_detector() face_locations = face_detector(image, 1) ## 4.3 获取定人人脸标志 predictor = dlib.shape_predictor(\\"shape_predictor_68_face_landmarks.dat\\") landmark = predictor(image, face_locations[0]) points = [(p.x, p.y) for p in landmark.parts()] for i, point in enumerate(points): if i in AffinePoint: cv.circle(image, (int(point[0]), int(point[1])), 4, (0, 0, 0), -1) else: cv.circle(image, (int(point[0]),int(point[1])), 2, (0, 0, 255), -1) cv.imshow('image_landmark', image) ## 5. 制作并展示当前图片的脸 image_template2 = np.zeros((500,500,3), np.uint8) image_template2[:] = [255, 255, 255] for i, point in enumerate(points): if i in AffinePoint: cv.circle(image_template2, (int(point[0]), int(point[1])), 4, (0, 0, 0), -1) else: cv.circle(image_template2, (int(point[0]),int(point[1])), 2, (0, 0, 255), -1) cv.imshow('image_template2', image_template2) ## 6. 展示放射变换之后的脸 npLandmarks = np.float32(points) npLandmarkIndices = np.array(AffinePoint) imgDim = 500 H = cv.getAffineTransform(npLandmarks[npLandmarkIndices], imgDim * TEMPLATE[npLandmarkIndices]) thumbnail = cv.warpAffine(image2, H, (imgDim, imgDim)) cv.imshow('thumbnail_source', thumbnail) ## 7. 展示放射变换之后带标志的脸 for i, point in enumerate(TEMPLATE): if i in AffinePoint: cv.circle(thumbnail, (int(point[0] * 500), int(point[1] * 500)), 4, (0, 0, 0), -1) else: cv.circle(thumbnail, (int(point[0]*500),int(point[1]*500)), 2, (0, 0, 255), -1) cv.imshow('thumbnail', thumbnail) cv.waitKey(0) cv.destroyAllWindows()"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-24T12:46:58.000Z"}],["meta",{"property":"article:author","content":"claroja"}],["meta",{"property":"article:modified_time","content":"2025-02-24T12:46:58.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"nll\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-24T12:46:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"claroja\\",\\"url\\":\\"https://claroja.github.io\\"}]}"]]},"headers":[{"level":2,"title":"1. 实现","slug":"_1-实现","link":"#_1-实现","children":[]},{"level":2,"title":"2. 直接调用 face_aligner.align","slug":"_2-直接调用-face-aligner-align","link":"#_2-直接调用-face-aligner-align","children":[{"level":3,"title":"2.1 标准化脸制作","slug":"_2-1-标准化脸制作","link":"#_2-1-标准化脸制作","children":[]}]}],"git":{"createdTime":1740401218000,"updatedTime":1740401218000,"contributors":[{"name":"Claroja","email":"63183535@qq.com","commits":1}]},"readingTime":{"minutes":3,"words":900},"filePathRelative":"2机器学习/2应用场景/1人脸识别/FaceAlign.md","localizedDate":"2025年2月24日","excerpt":"<h1> nll</h1>\\n<h2> 1. 实现</h2>\\n<div class=\\"language-python line-numbers-mode\\" data-ext=\\"py\\"><pre class=\\"language-python\\"><code><span class=\\"token keyword\\">import</span> numpy <span class=\\"token keyword\\">as</span> np\\n<span class=\\"token keyword\\">import</span> dlib\\n<span class=\\"token keyword\\">import</span> cv2 <span class=\\"token keyword\\">as</span> cv\\n\\n<span class=\\"token comment\\">## 1. 制作标准脸</span>\\nTEMPLATE <span class=\\"token operator\\">=</span> np<span class=\\"token punctuation\\">.</span>float32<span class=\\"token punctuation\\">(</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.</span>        <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.17856914</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.00412831</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.31259227</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.0196793</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.44770938</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.04809872</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.5800727</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.10028344</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.70349526</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.17999782</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.81208664</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.27627307</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.90467805</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.38463727</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.98006284</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.5073561</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">1.</span>        <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.63014114</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.9761118</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.7386777</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.89921385</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.8354747</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.80513287</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.91434467</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.6945623</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.9643504</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.56826204</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.9887058</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.432444</span>  <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.9993123</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.29529294</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1.</span>        <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.15909716</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.09485531</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.07603313</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.15534875</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.02492465</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.2377474</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.01139098</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.32313403</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.02415778</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.4036699</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.05780071</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.56864655</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.0521157</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.65128165</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.01543965</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.7379608</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.</span>        <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.82290924</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.01191543</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.88739765</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.06025707</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.48893312</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.15513189</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.48991537</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.24343018</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.49092147</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.33176517</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.49209353</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.422107</span>  <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.397399</span>  <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.48004663</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.4442625</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.49906778</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.4949509</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.5144414</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.54558265</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.49682876</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.59175086</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.47722608</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.194157</span>  <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.16926692</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.24600308</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.13693026</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.31000495</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.13735634</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.36378494</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.17794687</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.3063696</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.19082251</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.24390514</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.19138186</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.6189632</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.17277813</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.67249435</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.12988105</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.7362857</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.1279085</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.7888591</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.15817115</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.74115133</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.18155812</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.6791372</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.18370388</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.30711025</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.6418497</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.3759703</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.6109595</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.44670257</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.5970508</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.49721557</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.60872644</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.5500201</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.5954327</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.6233016</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.6070911</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.69541407</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.6341429</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.628068</span>  <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.70906836</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.5573954</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.7434471</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.50020397</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.7505844</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.44528747</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.74580276</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.37508208</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.7145425</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.3372878</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.64616466</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.44701463</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.64064664</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.49795204</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.6449633</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.5513943</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.6385937</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.6650228</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.63955915</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.5530556</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.67647934</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.4986481</span> <span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.68417645</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0.44657204</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0.6786047</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">## 2. 放射变换时用到的点(仿射变换需要用到3个点)</span>\\nINNER_EYES_AND_BOTTOM_LIP <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">39</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">42</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">57</span><span class=\\"token punctuation\\">]</span>\\nOUTER_EYES_AND_NOSE <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">36</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">45</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">33</span><span class=\\"token punctuation\\">]</span>\\nAffinePoint <span class=\\"token operator\\">=</span> OUTER_EYES_AND_NOSE\\n\\n<span class=\\"token comment\\">## 3. 制作并展示标准脸(放射变换三个点黑色, 其他红色)</span>\\nimage_template <span class=\\"token operator\\">=</span> np<span class=\\"token punctuation\\">.</span>zeros<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">500</span><span class=\\"token punctuation\\">,</span><span class=\\"token number\\">500</span><span class=\\"token punctuation\\">,</span><span class=\\"token number\\">3</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> np<span class=\\"token punctuation\\">.</span>uint8<span class=\\"token punctuation\\">)</span>\\nimage_template<span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">255</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">255</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">255</span><span class=\\"token punctuation\\">]</span>\\n<span class=\\"token keyword\\">for</span> i<span class=\\"token punctuation\\">,</span> point <span class=\\"token keyword\\">in</span> <span class=\\"token builtin\\">enumerate</span><span class=\\"token punctuation\\">(</span>TEMPLATE<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">if</span> i <span class=\\"token keyword\\">in</span> AffinePoint<span class=\\"token punctuation\\">:</span>\\n        cv<span class=\\"token punctuation\\">.</span>circle<span class=\\"token punctuation\\">(</span>image_template<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">*</span> <span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">*</span> <span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">4</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">:</span>\\n        cv<span class=\\"token punctuation\\">.</span>circle<span class=\\"token punctuation\\">(</span>image_template<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">*</span><span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">*</span><span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">255</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\ncv<span class=\\"token punctuation\\">.</span>imshow<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'image_template'</span><span class=\\"token punctuation\\">,</span> image_template<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">## 4.1 读取图片, 并展示</span>\\nimage <span class=\\"token operator\\">=</span> cv<span class=\\"token punctuation\\">.</span>imread<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'waitou.png'</span><span class=\\"token punctuation\\">)</span>\\nimage2 <span class=\\"token operator\\">=</span> image<span class=\\"token punctuation\\">.</span>copy<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\ncv<span class=\\"token punctuation\\">.</span>imshow<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'image'</span><span class=\\"token punctuation\\">,</span> image<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">## 4.2 定位人脸</span>\\nface_detector <span class=\\"token operator\\">=</span> dlib<span class=\\"token punctuation\\">.</span>get_frontal_face_detector<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nface_locations <span class=\\"token operator\\">=</span> face_detector<span class=\\"token punctuation\\">(</span>image<span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token comment\\">## 4.3 获取定人人脸标志</span>\\npredictor <span class=\\"token operator\\">=</span> dlib<span class=\\"token punctuation\\">.</span>shape_predictor<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"shape_predictor_68_face_landmarks.dat\\"</span><span class=\\"token punctuation\\">)</span>\\nlandmark <span class=\\"token operator\\">=</span> predictor<span class=\\"token punctuation\\">(</span>image<span class=\\"token punctuation\\">,</span> face_locations<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\npoints <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">(</span>p<span class=\\"token punctuation\\">.</span>x<span class=\\"token punctuation\\">,</span> p<span class=\\"token punctuation\\">.</span>y<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">for</span> p <span class=\\"token keyword\\">in</span> landmark<span class=\\"token punctuation\\">.</span>parts<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">]</span>\\n<span class=\\"token keyword\\">for</span> i<span class=\\"token punctuation\\">,</span> point <span class=\\"token keyword\\">in</span> <span class=\\"token builtin\\">enumerate</span><span class=\\"token punctuation\\">(</span>points<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">if</span> i <span class=\\"token keyword\\">in</span> AffinePoint<span class=\\"token punctuation\\">:</span>\\n        cv<span class=\\"token punctuation\\">.</span>circle<span class=\\"token punctuation\\">(</span>image<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">4</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">:</span>\\n        cv<span class=\\"token punctuation\\">.</span>circle<span class=\\"token punctuation\\">(</span>image<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">255</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\ncv<span class=\\"token punctuation\\">.</span>imshow<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'image_landmark'</span><span class=\\"token punctuation\\">,</span> image<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">## 5. 制作并展示当前图片的脸</span>\\nimage_template2 <span class=\\"token operator\\">=</span> np<span class=\\"token punctuation\\">.</span>zeros<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">500</span><span class=\\"token punctuation\\">,</span><span class=\\"token number\\">500</span><span class=\\"token punctuation\\">,</span><span class=\\"token number\\">3</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> np<span class=\\"token punctuation\\">.</span>uint8<span class=\\"token punctuation\\">)</span>\\nimage_template2<span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">:</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span><span class=\\"token number\\">255</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">255</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">255</span><span class=\\"token punctuation\\">]</span>\\n<span class=\\"token keyword\\">for</span> i<span class=\\"token punctuation\\">,</span> point <span class=\\"token keyword\\">in</span> <span class=\\"token builtin\\">enumerate</span><span class=\\"token punctuation\\">(</span>points<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">if</span> i <span class=\\"token keyword\\">in</span> AffinePoint<span class=\\"token punctuation\\">:</span>\\n        cv<span class=\\"token punctuation\\">.</span>circle<span class=\\"token punctuation\\">(</span>image_template2<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">4</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">:</span>\\n        cv<span class=\\"token punctuation\\">.</span>circle<span class=\\"token punctuation\\">(</span>image_template2<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">255</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\ncv<span class=\\"token punctuation\\">.</span>imshow<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'image_template2'</span><span class=\\"token punctuation\\">,</span> image_template2<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">## 6. 展示放射变换之后的脸</span>\\nnpLandmarks <span class=\\"token operator\\">=</span> np<span class=\\"token punctuation\\">.</span>float32<span class=\\"token punctuation\\">(</span>points<span class=\\"token punctuation\\">)</span>\\nnpLandmarkIndices <span class=\\"token operator\\">=</span> np<span class=\\"token punctuation\\">.</span>array<span class=\\"token punctuation\\">(</span>AffinePoint<span class=\\"token punctuation\\">)</span>\\nimgDim <span class=\\"token operator\\">=</span> <span class=\\"token number\\">500</span>\\nH <span class=\\"token operator\\">=</span> cv<span class=\\"token punctuation\\">.</span>getAffineTransform<span class=\\"token punctuation\\">(</span>npLandmarks<span class=\\"token punctuation\\">[</span>npLandmarkIndices<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n                           imgDim <span class=\\"token operator\\">*</span> TEMPLATE<span class=\\"token punctuation\\">[</span>npLandmarkIndices<span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span>\\nthumbnail <span class=\\"token operator\\">=</span> cv<span class=\\"token punctuation\\">.</span>warpAffine<span class=\\"token punctuation\\">(</span>image2<span class=\\"token punctuation\\">,</span> H<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span>imgDim<span class=\\"token punctuation\\">,</span> imgDim<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\ncv<span class=\\"token punctuation\\">.</span>imshow<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'thumbnail_source'</span><span class=\\"token punctuation\\">,</span> thumbnail<span class=\\"token punctuation\\">)</span>\\n\\n<span class=\\"token comment\\">## 7. 展示放射变换之后带标志的脸</span>\\n<span class=\\"token keyword\\">for</span> i<span class=\\"token punctuation\\">,</span> point <span class=\\"token keyword\\">in</span> <span class=\\"token builtin\\">enumerate</span><span class=\\"token punctuation\\">(</span>TEMPLATE<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">if</span> i <span class=\\"token keyword\\">in</span> AffinePoint<span class=\\"token punctuation\\">:</span>\\n        cv<span class=\\"token punctuation\\">.</span>circle<span class=\\"token punctuation\\">(</span>thumbnail<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">*</span> <span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">*</span> <span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">4</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">:</span>\\n        cv<span class=\\"token punctuation\\">.</span>circle<span class=\\"token punctuation\\">(</span>thumbnail<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">*</span><span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span><span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>point<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token operator\\">*</span><span class=\\"token number\\">500</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">255</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span>\\ncv<span class=\\"token punctuation\\">.</span>imshow<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'thumbnail'</span><span class=\\"token punctuation\\">,</span> thumbnail<span class=\\"token punctuation\\">)</span>\\ncv<span class=\\"token punctuation\\">.</span>waitKey<span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span>\\ncv<span class=\\"token punctuation\\">.</span>destroyAllWindows<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"王新宇"},"autoDesc":true}`);export{n as data};
