import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as a,c as s,a as t}from"./app-nD1Z-e8V.js";const e="/assets/1-Ye4Fumqo.svg",o={},p=t(`<h1 id="exemode" tabindex="-1"><a class="header-anchor" href="#exemode" aria-hidden="true">#</a> exeMode</h1><h2 id="base-concept" tabindex="-1"><a class="header-anchor" href="#base-concept" aria-hidden="true">#</a> base concept</h2><p><strong>STREAMING</strong> There is the “classic” execution behavior of the DataStream API, which we call STREAMING execution mode. This should be used for unbounded jobs that require continuous incremental processing and are expected to stay online indefinitely.</p><p><strong>BATCH</strong> Additionally, there is a batch-style execution mode that we call BATCH execution mode. This executes jobs in a way that is more reminiscent of batch processing frameworks such as MapReduce. This should be used for bounded jobs for which you have a known fixed input and which do not run continuously.</p><p>a job executing in <strong>STREAMING</strong> mode might produce incremental updates (think upserts in a database) while a <strong>BATCH</strong> job would only produce one final result at the end.</p><p>The <strong>BATCH</strong> execution mode can only be used for Jobs/Flink Programs that are bounded.<strong>STREAMING</strong> execution mode, on the other hand, can be used for both bounded and unbounded jobs. As a rule of thumb, you should be using <strong>BATCH</strong> execution mode when your program is bounded because this will be more efficient. You have to use <strong>STREAMING</strong> execution mode when your program is unbounded because only this mode is general enough to be able to deal with continuous data streams.</p><h2 id="config" tabindex="-1"><a class="header-anchor" href="#config" aria-hidden="true">#</a> config</h2><p>The execution mode can be configured via the execution.runtime-mode setting. There are three possible values:</p><ul><li>STREAMING: The classic DataStream execution mode (default)</li><li>BATCH: Batch-style execution on the DataStream API</li><li>AUTOMATIC: Let the system decide based on the boundedness of the sources</li></ul><ol><li>configure the execution mode via the command line:</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>bin/flink run -Dexecution.runtime-mode<span class="token operator">=</span>BATCH examples/streaming/WordCount.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>configure the execution mode in code</li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>env <span class="token operator">=</span> StreamExecutionEnvironment<span class="token punctuation">.</span>get_execution_environment<span class="token punctuation">(</span><span class="token punctuation">)</span>
env<span class="token punctuation">.</span>set_runtime_mode<span class="token punctuation">(</span>RuntimeExecutionMode<span class="token punctuation">.</span>BATCH<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="task-scheduling" tabindex="-1"><a class="header-anchor" href="#task-scheduling" aria-hidden="true">#</a> Task Scheduling</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>env <span class="token operator">=</span> StreamExecutionEnvironment<span class="token punctuation">.</span>getExecutionEnvironment<span class="token punctuation">(</span><span class="token punctuation">)</span>
source <span class="token operator">=</span> env<span class="token punctuation">.</span>fromElements<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

source<span class="token punctuation">.</span>name<span class="token punctuation">(</span><span class="token string">&quot;source&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">(</span><span class="token string">&quot;map1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">(</span><span class="token string">&quot;map2&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>rebalance<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">(</span><span class="token string">&quot;map3&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">(</span><span class="token string">&quot;map4&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>keyBy<span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">(</span><span class="token string">&quot;map5&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">(</span><span class="token string">&quot;map6&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>sinkTo<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">(</span><span class="token string">&quot;sink&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Operations that imply a <strong>1-to-1 connection pattern</strong> between operations, such as <code>map()</code>, <code>flatMap()</code>, or <code>filter()</code> can just forward data straight to the next operation, which allows these operations to be chained together. This means that Flink would not normally insert a network shuffle between them.</p><p>Operation such as <code>keyBy()</code> or <code>rebalance()</code> on the other hand require data to be <strong>shuffled</strong> between different parallel instances of tasks. This induces a network shuffle.</p><p>For the above example Flink would group operations together as tasks like this:</p><ul><li>Task1: source, map1, and map2</li><li>Task2: map3, map4</li><li>Task3: map5, map6, and sink</li></ul><figure><img src="`+e+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>refs: https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/datastream/execution_mode/</p>',21),c=[p];function i(u,l){return a(),s("div",null,c)}const k=n(o,[["render",i],["__file","exeMode.html.vue"]]);export{k as default};
