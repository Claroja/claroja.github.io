import{_ as s}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as n,c as a,e}from"./app-A10JnHE0.js";const o={},t=e(`<h1 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> cookie</h1><p><code>cookie</code>是保存在<code>header</code>中的一个值, 可以通过<code>header</code>直接控制, 也可以通过requests提供的属性方法控制. 本质都是操作<code>header</code>中的cookie.</p><h2 id="response-cookie" tabindex="-1"><a class="header-anchor" href="#response-cookie" aria-hidden="true">#</a> response cookie</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> requests
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd


url<span class="token operator">=</span> <span class="token string">&quot;https://www.baidu.com&quot;</span>
res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="通过headers来获得服务器返回的cookie" tabindex="-1"><a class="header-anchor" href="#通过headers来获得服务器返回的cookie" aria-hidden="true">#</a> 通过headers来获得服务器返回的cookie</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>res<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&quot;Set-Cookie&quot;</span><span class="token punctuation">]</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
&#39;BDORZ=27315; max-age=86400; domain=.baidu.com; path=/&#39;
&quot;&quot;&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用requestscookiejar相比header形式更容易处理cookie" tabindex="-1"><a class="header-anchor" href="#使用requestscookiejar相比header形式更容易处理cookie" aria-hidden="true">#</a> 使用RequestsCookieJar相比header形式更容易处理cookie</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>res<span class="token punctuation">.</span>cookies
<span class="token triple-quoted-string string">&quot;&quot;&quot;
&lt;RequestsCookieJar[Cookie(version=0, name=&#39;BDORZ&#39;, value=&#39;27315&#39;, port=None, port_specified=False, domain=&#39;.baidu.com&#39;, domain_specified=True, domain_initial_dot=True, path=&#39;/&#39;, path_specified=True, secure=False, expires=1676017680, discard=False, comment=None, comment_url=None, 
rest={}, rfc2109=False)]&gt;
&quot;&quot;&quot;</span>
res<span class="token punctuation">.</span>cookies<span class="token punctuation">[</span><span class="token string">&quot;BDORZ&quot;</span><span class="token punctuation">]</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
&#39;27315&#39;
&quot;&quot;&quot;</span>
res<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>get_dict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
{&#39;BDORZ&#39;: &#39;27315&#39;}
&quot;&quot;&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="requests-cookie" tabindex="-1"><a class="header-anchor" href="#requests-cookie" aria-hidden="true">#</a> requests cookie</h2><h3 id="通过cookies参数上传cookie" tabindex="-1"><a class="header-anchor" href="#通过cookies参数上传cookie" aria-hidden="true">#</a> 通过cookies参数上传cookie</h3><ol><li>可以简单使用<code>dict</code></li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>url <span class="token operator">=</span> <span class="token string">&#39;https://httpbin.org/cookies&#39;</span>
cookies <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>cookies_are<span class="token operator">=</span><span class="token string">&#39;working&#39;</span><span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> cookies<span class="token operator">=</span>cookies<span class="token punctuation">)</span>
r<span class="token punctuation">.</span>text
<span class="token string">&#39;{&quot;cookies&quot;: {&quot;cookies_are&quot;: &quot;working&quot;}}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>也可以自己创建<code>cookiejar</code></li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>jar <span class="token operator">=</span> requests<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>RequestsCookieJar<span class="token punctuation">(</span><span class="token punctuation">)</span>
jar<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;tasty_cookie&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;yum&#39;</span><span class="token punctuation">,</span> domain<span class="token operator">=</span><span class="token string">&#39;httpbin.org&#39;</span><span class="token punctuation">,</span> path<span class="token operator">=</span><span class="token string">&#39;/cookies&#39;</span><span class="token punctuation">)</span>
jar<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;gross_cookie&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;blech&#39;</span><span class="token punctuation">,</span> domain<span class="token operator">=</span><span class="token string">&#39;httpbin.org&#39;</span><span class="token punctuation">,</span> path<span class="token operator">=</span><span class="token string">&#39;/elsewhere&#39;</span><span class="token punctuation">)</span>
url <span class="token operator">=</span> <span class="token string">&#39;https://httpbin.org/cookies&#39;</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> cookies<span class="token operator">=</span>jar<span class="token punctuation">)</span>
r<span class="token punctuation">.</span>text
<span class="token string">&#39;{&quot;cookies&quot;: {&quot;tasty_cookie&quot;: &quot;yum&quot;}}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14),i=[t];function c(p,r){return n(),a("div",null,i)}const d=s(o,[["render",c],["__file","cookie.html.vue"]]);export{d as default};
